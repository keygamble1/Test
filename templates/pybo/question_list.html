{% extends "base.html" %}
{% block content %}
{% load pybo_filter %}
{% comment %} py파일 =load extends는 html {% endcomment %}
<div class="container my-3">
    <table class="table">
        <thead>
            <tr class="table-dark">
                <th>번호</th>
                <th>제목</th>
                <th>작성일시</th>
            </tr>
        </thead>
        <tbody>
            {% if question_list %}
            {% for question in question_list  %}
            <tr>
                {% comment %} tr은 공통된 행이고, 거기서 데이터끊어주기위해 td th를쓴다고봐야함 {% endcomment %}
                <td>
                  {{question_list.paginator.count|sub:question_list.start_index|sub:forloop.counter0|add:1 }}
                    {% comment %} forllop.counter0는 0 0없으면 1부터 {% endcomment %}
                </td>
                <td>
                    {% comment %} url하고 ,안찍음 {% endcomment %}
                    <a href="{% url 'pybo:detail' question.id %}">{{question.subject}} </a>
                    {% if question.answer_set.count > 0 %}
                      <span class="text-danger small mx-2"> {{question.answer_set.count}} </span>
                    {% endif %}
                </td>
                {% comment %} as_가들어가면 모델이나 html 을 자동생성해준다라고봐야함? {% endcomment %}
                <td>{{question.create_date}} </td>
            </tr>
            {% endfor %}
            {% else %}
            <tr>
                <td></td>
            </tr>
            {% endif %}
        </tbody>
    </table>
    <a href="{% url 'pybo:question_create' %}" class="btn btn-primary">질문등록하기</a>
</div>

  <ul class="pagination justify-content-center">
  {% if  question_list.has_previous %}
  <li class="page-item">
      {% comment %} aria-disabled는 보조기능사용시에도 없앰 {% endcomment %}
      <a class="page-link" href="?page= {{question_list.previous_page_number}}" >이전</a>
  </li>
  
  {% else %}
    <li class="page-item disabled">
      <a class="page-link" href="#" tabindex="-1" aria-disabled="true">이전</a>
    </li>
  {% endif %}
     {% comment %} aria-disabled는 보조기능사용시에도 없앰 {% endcomment %}
    {% for page_number in question_list.paginator.page_range  %}
    {% if page_number >= question_list.number|add:-5 and page_number <= question_list.number|add:5  %}
    {% if page_number == question_list.number %}
    {% comment %} 현재페이지만 active하라 {% endcomment %}
      <li class="page-item active" aria-current="page">
        <a class="page-link" href="?page={{page_number}} ">{{page_number}} </a>
      </li>
      {% else %}
      <li class="page-item" aria-current="page">
        {% comment %} ?page안하면 게시판을들어가버림 내가원하는건 page이며
        ?pagee는 pagnator에서 가져오는것? {% endcomment %}
        <a class="page-link" href="?page={{page_number}} ">{{page_number}} </a>
      </li>
    {% endif %}
    {% endif %}
    {% endfor %}


        {% if  question_list.has_next %}
        <li class="page-item">
            {% comment %} aria-disabled는 보조기능사용시에도 없앰 {% endcomment %}
            <a class="page-link" href="?page= {{question_list.next_page_number}}" >다음</a>
        </li>
        
        {% else %}
          <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">다음</a>
          </li>
        {% endif %}

{% endblock  %}